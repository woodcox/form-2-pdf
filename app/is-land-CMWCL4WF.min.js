(()=>{var w=Object.defineProperty;var b=(h,t,e)=>t in h?w(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var c=(h,t,e)=>(b(h,typeof t!="symbol"?t+"":t,e),e);var p=(h,t,e)=>new Promise((i,a)=>{var r=m=>{try{f(e.next(m))}catch(u){a(u)}},n=m=>{try{f(e.throw(m))}catch(u){a(u)}},f=m=>m.done?i(m.value):Promise.resolve(m.value).then(r,n);f((e=e.apply(h,t)).next())});var o=class extends HTMLElement{constructor(){super(),this.ready=new Promise(t=>{this.readyResolve=t})}static getParents(t,e=!1){let i=[];for(;t;){if(t.matches&&t.matches(o.tagName)){if(e&&t===e)break;d.hasConditions(t)&&i.push(t)}t=t.parentNode}return i}static ready(t){return p(this,null,function*(){let e=o.getParents(t);if(e.length===0)return;let i=yield Promise.all(e.map(a=>a.wait()));if(i.length)return i[0]})}forceFallback(){window.Island&&Object.assign(o.fallback,window.Island.fallback);for(let t in o.fallback){let e=Array.from(this.querySelectorAll(t)).reverse();for(let i of e){if(!i.isConnected||i.localName===o.tagName)continue;let a=o.ready(i);o.fallback[t](a,i,o.prefix)}}}wait(){return this.ready}connectedCallback(){return p(this,null,function*(){d.hasConditions(this)&&this.forceFallback(),yield this.hydrate()})}getTemplates(){return this.querySelectorAll(`template[${o.attr.template}]`)}replaceTemplates(t){for(let e of t){if(o.getParents(e,this).length>0)continue;let i=e.getAttribute(o.attr.template);if(i==="replace"){let a=Array.from(this.childNodes);for(let r of a)this.removeChild(r);this.appendChild(e.content);break}else{let a=e.innerHTML;if(i==="once"&&a){if(o.onceCache.has(a)){e.remove();return}o.onceCache.set(a,!0)}e.replaceWith(e.content)}}}hydrate(){return p(this,null,function*(){let t=[];this.parentNode&&t.push(o.ready(this.parentNode));let e=d.getConditions(this);for(let r in e)d.map[r]&&t.push(d.map[r](e[r],this));yield Promise.all(t),this.replaceTemplates(this.getTemplates());let i,a=this.getAttribute(o.attr.import);if(a&&(i=yield import(a)),i){let r=o.autoinit[this.getAttribute(o.attr.autoInitType)||a];r&&(yield r.call(this,i))}this.readyResolve(),this.setAttribute(o.attr.ready,""),this.querySelectorAll(`[${o.attr.defer}]`).forEach(r=>r.removeAttribute(o.attr.defer))})}},s=o;c(s,"tagName","is-land"),c(s,"prefix","is-land--"),c(s,"attr",{autoInitType:"autoinit",import:"import",template:"data-island",ready:"ready",defer:"defer-hydration"}),c(s,"onceCache",new Map),c(s,"fallback",{":not(:defined):not([defer-hydration])":(t,e,i)=>{let a=document.createElement(i+e.localName);for(let n of e.getAttributeNames())a.setAttribute(n,e.getAttribute(n));let r=e.shadowRoot;if(!r){let n=e.querySelector(":scope > template:is([shadowrootmode], [shadowroot])");n&&(r=e.attachShadow({mode:"open"}),r.appendChild(n.content.cloneNode(!0)))}return r&&a.attachShadow({mode:r.mode}).append(...r.childNodes),a.append(...e.childNodes),e.replaceWith(a),t.then(()=>{a.shadowRoot&&e.shadowRoot.append(...a.shadowRoot.childNodes),e.append(...a.childNodes),a.replaceWith(e)})}}),c(s,"autoinit",{"petite-vue":function(t){t.createApp().mount(this)},vue:function(t){t.createApp().mount(this)},svelte:function(t){new t.default({target:this})},"svelte-ssr":function(t){new t.default({target:this,hydrate:!0})},preact:function(t){t.default(this)}});var l=class{static hasConditions(t){return Object.keys(l.getConditions(t)).length>0}static getConditions(t){let e={};for(let i of Object.keys(l.map))t.hasAttribute(`on:${i}`)&&(e[i]=t.getAttribute(`on:${i}`));return e}static visible(t,e){if("IntersectionObserver"in window)return new Promise(i=>{let a=new IntersectionObserver(r=>{let[n]=r;n.isIntersecting&&(a.unobserve(n.target),i())});a.observe(e)})}static idle(){let t=new Promise(e=>{document.readyState!=="complete"?window.addEventListener("load",()=>e(),{once:!0}):e()});return"requestIdleCallback"in window?Promise.all([new Promise(e=>{requestIdleCallback(()=>{e()})}),t]):t}static interaction(t,e){let i=["click","touchstart"];return t&&(i=(t||"").split(",").map(a=>a.trim())),new Promise(a=>{function r(n){a();for(let f of i)e.removeEventListener(f,r)}for(let n of i)e.addEventListener(n,r,{once:!0})})}static media(t){let e={matches:!0};if(t&&"matchMedia"in window&&(e=window.matchMedia(t)),!e.matches)return new Promise(i=>{e.addListener(a=>{a.matches&&i()})})}static saveData(t){return!("connection"in navigator)||navigator.connection.saveData===(t!=="false")?Promise.resolve():new Promise(()=>{})}},d=l;c(d,"map",{visible:l.visible,idle:l.idle,interaction:l.interaction,media:l.media,"save-data":l.saveData});"customElements"in window&&(window.customElements.define(s.tagName,s),window.Island=s);var g=s.ready;})();
